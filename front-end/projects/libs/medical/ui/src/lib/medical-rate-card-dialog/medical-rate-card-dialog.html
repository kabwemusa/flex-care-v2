<div class="p-6">
  <h2 class="text-2xl font-bold text-slate-800 mb-2">{{ data ? 'Edit' : 'New' }} Rate Card</h2>
  <p class="text-slate-500 text-sm mb-6">Define the versioning and validity for this price set.</p>

  <form [formGroup]="cardForm" (ngSubmit)="save()" class="space-y-4">
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Associated Plan</mat-label>
      <mat-select formControlName="plan_id">
        @for (plan of planStore.plans(); track plan.id) {
        <mat-option [value]="plan.id">{{ plan.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Rate Card Name</mat-label>
      <input matInput formControlName="name" placeholder="e.g., 2026 Standard Corporate Rates" />
    </mat-form-field>

    <div class="grid grid-cols-2 gap-4">
      <mat-form-field appearance="fill">
        <mat-label>Valid From</mat-label>
        <input matInput [matDatepicker]="fromPicker" formControlName="valid_from" />
        <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
        <mat-datepicker #fromPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Valid Until</mat-label>
        <input matInput [matDatepicker]="untilPicker" formControlName="valid_until" />
        <mat-datepicker-toggle matSuffix [for]="untilPicker"></mat-datepicker-toggle>
        <mat-datepicker #untilPicker></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-100">
      <span class="text-sm font-semibold text-blue-900">Activate this version immediately?</span>
      <mat-slide-toggle formControlName="is_active" color="primary"></mat-slide-toggle>
    </div>

    <div class="flex justify-end gap-3 pt-6">
      <button type="button" mat-button (click)="ref.close()">Cancel</button>
      <button mat-flat-button color="primary" [disabled]="cardForm.invalid" class="rounded-lg px-8">
        {{ data ? 'Update Card' : 'Create & Continue' }}
      </button>
    </div>
  </form>
</div>
