<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  @for (plan of store.plans(); track plan.id) {
  <div
    class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md"
  >
    <div class="flex justify-between items-start mb-4">
      <span
        class="px-2 py-1 bg-blue-50 text-blue-700 rounded text-[10px] font-bold uppercase tracking-wider"
      >
        {{ plan.type }}
      </span>
      <button mat-icon-button [matMenuTriggerFor]="m"><mat-icon>more_horiz</mat-icon></button>
    </div>

    <h3 class="text-xl font-bold text-slate-800">{{ plan.name }}</h3>
    <p class="text-xs text-slate-400 font-mono mb-4">{{ plan.code }}</p>

    <div class="flex gap-4 mb-6">
      <div
        class="flex items-center text-slate-600 bg-slate-50 px-3 py-2 rounded-lg border border-slate-100"
      >
        <mat-icon class="text-sm mr-2">medical_services</mat-icon>
        <span class="text-xs font-bold">{{ plan.features_count || 0 }} Benefits</span>
      </div>
      <div
        class="flex items-center text-slate-600 bg-slate-50 px-3 py-2 rounded-lg border border-slate-100"
      >
        <mat-icon class="text-sm mr-2">extension</mat-icon>
        <span class="text-xs font-bold">{{ plan.addons_count || 0 }} Add-ons</span>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-2 pt-4 border-t border-slate-50">
      <button mat-stroked-button class="!rounded-lg" (click)="openMatMatrixDialog(plan)">
        <mat-icon class="text-sm">settings</mat-icon> Limits
      </button>
      <button mat-stroked-button class="!rounded-lg" (click)="openAddonsDialog(plan)">
        <mat-icon class="text-sm">add_link</mat-icon> Add-ons
      </button>
    </div>

    <mat-menu #m="matMenu">
      <button mat-menu-item (click)="openDialog(plan)"><mat-icon>edit</mat-icon>Edit Plan</button>
      <button mat-menu-item class="text-red-600" (click)="deletePlan(plan.id)">
        <mat-icon class="text-red-600">delete</mat-icon>Delete
      </button>
    </mat-menu>
  </div>
  }
</div>
