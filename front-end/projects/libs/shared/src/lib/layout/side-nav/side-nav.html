<aside
  [class]="
    'relative z-30 flex h-screen flex-col border-r border-divider/80 shadow-lg bg-gradient-to-b from-content1/90 to-background/90 backdrop-blur-sm supports-[backdrop-filter]:from-content1/70 supports-[backdrop-filter]:to-background/70 transition-all duration-300 ease-in-out ' +
    (collapsed ? 'w-16' : 'w-64')
  "
>
  <!-- Header -->
  <div class="flex h-16 items-center justify-between border-b border-divider/60 px-3">
    <div
      [class]="
        'flex items-center gap-3 transition-all duration-300 ' + (collapsed ? 'justify-center' : '')
      "
    >
      <div
        class="flex h-8 w-8 items-center justify-center rounded-lg bg-primary/15 ring-1 ring-primary/20"
      >
        <div class="h-4 w-4 rounded bg-primary/60 shadow-sm"></div>
      </div>

      @if (!collapsed) {
      <div class="flex flex-col">
        <span class="text-sm font-semibold text-foreground">FlexCare</span>
        <span class="text-xs text-foreground-500">Admin</span>
      </div>
      }
    </div>

    @if (!collapsed) {
    <button
      mat-icon-button
      (click)="toggle.emit()"
      aria-label="Collapse sidebar"
      class="!shrink-0 !text-foreground-500 hover:!text-foreground hover:!bg-content2/60"
    >
      <mat-icon class="!h-4 !w-4 !text-base">chevron_left</mat-icon>
    </button>
    }
  </div>

  <!-- Navigation -->
  <div class="flex-1 overflow-y-auto p-2">
    <nav class="space-y-1">
      @for (item of items(); track item.href) { @if (!collapsed) {
      <a
        [routerLink]="item.href"
        routerLinkActive="bg-primary/10 text-primary border-primary/30 shadow-sm"
        [routerLinkActiveOptions]="{ exact: item.href === '/' }"
        class="group flex items-center gap-3 rounded-lg px-3 py-2.5 transition-all duration-200 text-foreground-600 hover:text-foreground hover:bg-content2/60 border border-transparent hover:border-divider/60"
      >
        <mat-icon
          class="!h-5 !w-5 shrink-0 !text-xl transition-colors text-foreground-500 group-hover:text-foreground"
        >
          {{ item.icon }}
        </mat-icon>
        <span class="truncate text-sm font-medium">
          {{ item.label }}
        </span>
      </a>
      } @else {
      <div [matTooltip]="item.label" matTooltipPosition="right" [matTooltipShowDelay]="500">
        <a
          [routerLink]="item.href"
          routerLinkActive="bg-primary/10 text-primary border-primary/30 shadow-sm"
          [routerLinkActiveOptions]="{ exact: item.href === '/' }"
          class="group flex items-center justify-center rounded-lg px-3 py-2.5 transition-all duration-200 text-foreground-600 hover:text-foreground hover:bg-content2/60 border border-transparent hover:border-divider/60"
        >
          <mat-icon
            class="!h-5 !w-5 shrink-0 !text-xl transition-colors text-foreground-500 group-hover:text-foreground"
          >
            {{ item.icon }}
          </mat-icon>
        </a>
      </div>
      } }
    </nav>
  </div>

  <!-- Footer -->
  @if (collapsed) {
  <div class="border-t border-divider/60 p-2">
    <button
      mat-icon-button
      (click)="toggle.emit()"
      aria-label="Expand sidebar"
      class="!w-full !text-foreground-500 hover:!text-foreground hover:!bg-content2/60"
    >
      <mat-icon class="!h-4 !w-4 !text-base">chevron_right</mat-icon>
    </button>
  </div>
  } @else {
  <div class="h-4"></div>
  }
</aside>
